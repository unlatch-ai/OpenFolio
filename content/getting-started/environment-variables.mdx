# Environment Variables

OpenFolio uses environment variables for configuration. Copy `.env.example` to `.env.local` for local development.

## Required Variables

| Variable | Description |
|----------|-------------|
| `NEXT_PUBLIC_SUPABASE_URL` | Supabase project URL |
| `NEXT_PUBLIC_SUPABASE_ANON_KEY` | Supabase anonymous (publishable) key |
| `OPENAI_API_KEY` | OpenAI API key for embeddings and AI features |
| `TRIGGER_SECRET_KEY` | Trigger.dev secret key for background jobs |

## Server-Side Only

These are used for service operations and should never be exposed to the client:

| Variable | Description |
|----------|-------------|
| `SUPABASE_SERVICE_ROLE_KEY` | Supabase service role key (bypasses RLS) |
| `SUPABASE_URL` | Supabase URL for server-side operations |

## Local Supabase

After running `pnpm supabase:start`, get local values from `supabase status`:

```env
NEXT_PUBLIC_SUPABASE_URL=http://127.0.0.1:54321
NEXT_PUBLIC_SUPABASE_ANON_KEY=<from supabase status>
SUPABASE_SERVICE_ROLE_KEY=<from supabase status>
SUPABASE_URL=http://127.0.0.1:54321
```

## Optional Variables

| Variable | Description |
|----------|-------------|
| `GOOGLE_CLIENT_ID` | Google OAuth client ID (for Gmail/Calendar sync) |
| `GOOGLE_CLIENT_SECRET` | Google OAuth client secret |
| `MICROSOFT_CLIENT_ID` | Microsoft OAuth client ID (for Mail/Calendar/Contacts sync) |
| `MICROSOFT_CLIENT_SECRET` | Microsoft OAuth client secret |
| `MICROSOFT_TENANT_ID` | Optional Microsoft tenant ID (defaults to `common`) |
| `INTEGRATION_ENCRYPTION_KEY` | AES-256-GCM key for encrypting stored OAuth tokens |
| `OPENFOLIO_MODE` | `self-hosted` (single-user no-auth default) or `hosted` (auth-required managed mode) |
| `NEXT_PUBLIC_OPENFOLIO_MODE` | Client mirror of `OPENFOLIO_MODE` |

## Mode Overrides (Advanced, Optional)

Most deployments do not need these. They exist to force behavior when needed:

| Variable | Values |
|----------|--------|
| `OPENFOLIO_DEPLOYMENT_MODE` | `self-hosted` \| `hosted` |
| `OPENFOLIO_AUTH_MODE` | `none` \| `supabase` |
| `OPENFOLIO_BILLING_MODE` | `disabled` \| `enabled` |
| `OPENFOLIO_HOSTED_SIGNUP_MODE` | `invite-only` \| `open` |
| `NEXT_PUBLIC_OPENFOLIO_DEPLOYMENT_MODE` | client mirror |
| `NEXT_PUBLIC_OPENFOLIO_AUTH_MODE` | client mirror |
| `NEXT_PUBLIC_OPENFOLIO_BILLING_MODE` | client mirror |
| `NEXT_PUBLIC_OPENFOLIO_HOSTED_SIGNUP_MODE` | client mirror |

## Production

For Vercel deployments, set environment variables via the Vercel Dashboard or CLI:

```bash
vercel env add <VAR_NAME> production
```
