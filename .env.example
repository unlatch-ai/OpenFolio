# ============================================================
# REQUIRED
# ============================================================

# Supabase
# For local dev: run `pnpm supabase:start` and copy values from `supabase status`
#   "anon key" (publishable) → NEXT_PUBLIC_SUPABASE_ANON_KEY
#   "service_role key" (secret) → SUPABASE_SERVICE_ROLE_KEY
# For production: get these from your Supabase project dashboard
NEXT_PUBLIC_SUPABASE_URL=http://127.0.0.1:54321
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
SUPABASE_URL=http://127.0.0.1:54321

# OpenAI (for embeddings and AI chat)
OPENAI_API_KEY=sk-...

# Trigger.dev (for background jobs — get from trigger.dev dashboard)
TRIGGER_SECRET_KEY=tr_dev_...

# App mode
# Deployment:
# "hosted" = managed OpenFolio (Supabase auth, billing enabled)
# "self-hosted" = your own server (single-user no-auth defaults)
OPENFOLIO_MODE=self-hosted
NEXT_PUBLIC_OPENFOLIO_MODE=self-hosted

# Optional advanced overrides (leave unset unless you need to force behavior):
# OPENFOLIO_DEPLOYMENT_MODE=self-hosted
# NEXT_PUBLIC_OPENFOLIO_DEPLOYMENT_MODE=self-hosted
# OPENFOLIO_AUTH_MODE=none
# NEXT_PUBLIC_OPENFOLIO_AUTH_MODE=none
# OPENFOLIO_BILLING_MODE=disabled
# NEXT_PUBLIC_OPENFOLIO_BILLING_MODE=disabled
# Hosted signup mode:
# - invite-only (default in hosted mode)
# - open
# OPENFOLIO_HOSTED_SIGNUP_MODE=invite-only
# NEXT_PUBLIC_OPENFOLIO_HOSTED_SIGNUP_MODE=invite-only

# ============================================================
# OPTIONAL — Integrations
# ============================================================

# Google OAuth (for Gmail, Calendar, Contacts sync)
# Full guide: https://openfolio.ai/docs/self-hosting/google-oauth
# Set up at https://console.cloud.google.com/ → APIs & Services → Credentials → OAuth 2.0 Client ID
# In the Google console, configure:
#   Authorized JavaScript origins:  http://localhost:3000, http://127.0.0.1:54321
#   Authorized redirect URIs:       http://127.0.0.1:54321/auth/v1/callback
#   (For production, add your Supabase project URL as a redirect URI:
#    https://<project-ref>.supabase.co/auth/v1/callback)
# NEXT_PUBLIC_GOOGLE_CLIENT_ID controls whether the "Sign in with Google" button appears
GOOGLE_CLIENT_ID=
NEXT_PUBLIC_GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# Microsoft OAuth (for Mail, Calendar, Contacts sync)
# App registration: https://portal.azure.com/ -> Microsoft Entra ID -> App registrations
# Redirect URI:
#   http://localhost:3000/api/integrations/microsoft/callback
MICROSOFT_CLIENT_ID=
MICROSOFT_CLIENT_SECRET=
# Optional. Defaults to \"common\" for multi-tenant apps.
MICROSOFT_TENANT_ID=

# Encryption key for stored OAuth tokens
# Generate with: openssl rand -hex 32
INTEGRATION_ENCRYPTION_KEY=

# HMAC secret for OAuth state parameter (prevents CSRF in OAuth flows)
# Generate with: openssl rand -hex 32
# Required when using Google or Microsoft OAuth integrations
OAUTH_STATE_SECRET=
